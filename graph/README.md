### Методы вычислений на графах
Предполагется, что каждый объект представлен, как  вершина графа, т.о. отношения между парами объектов отображаются в виде ребер графа.
Тогда граф есть множество вершин ${N}$ и мнодество ребер ${E}$, где вес ребра  отображает степень отношения между объектами.
Образуется полносвязный граф. (граф может быть неполносвязным в случаях, когда ребра с неудовлетворительным весом удаляются из графа!)  
В таком представлении задачи необходимо  найти наилучшее разбиение множества вершин на непесекающиеся подмножества (клики, т.е. полносвязные компоненты) размерности не больше указанного занчения, для которых сумма  весов ребер клики (вес клики) имеет наибольшее значение.  
Количество возможных клик в графе зависит от связности исходного графа. Параметр WEIGHT_THRESHOLD (порог силы связи между вершинами) регулирует количество возможных ребер в исходном графе. В худшем случае исходный граф - полносвязен. Т.о. на полносвязном графе количество возможных клик расчитывается, как число возможных сочетаний, т.е. $$\sum_{k=1}^{N}С_{N}^{k} =\sum_{k=1}^{N} \frac{N!}{k!(N-k)!} $$

Т.о. определение порога [WEIGHT_THRESHOLD]() имеет коллосальное значение для ограничения временной сложности поиска решения.
Крайне желательно избегать случаев сильносвязных и тем более полносвязных графов. 
Для наглядности временные оценки даны в разделе [Graph approach benchmark]()

### Алгоритм (дорабоатть словами)
* Инициализация графа      
* find k-clique communities (находятся все сообщества клик указанной размерности)
* Find all cliques in k-clique communities among all graph   (nx.find_cliques = O(3^N/3)) - реализуется в параллельном режиме
* prepare_clique - расчет весов клик - реализуется в параллельном режиме по числу ядер
* Сортировка клик по убыванию веса (O(nlog(n))) n = количество клик
* Прохождение по списку клик: на каждой итерации отбирается клика, если все вершины клики не были рассмотрены на предыд.итериациях, цикл прекращается, когда все вершины графа покрыты отобранными кликами. 

### Временная и пространственная сложность алгоритма
ДОРАБОТАТЬ!!!
* find k-clique communities ( nx.find_cliques = O(3^n/3) - )



## Функции 
* Построение графа - [graph_structure.py](https://github.com/plaguedoctor39/graph-search/blob/main/func/graph_structure.py)
  * graphPreparation - создание графа
  * DrawGraph - отрисовка графа
* Вспомогательные функции для вычислений - [Auxiliary_functions.py](https://github.com/plaguedoctor39/graph-search/blob/main/func/Auxiliary_functions.py)
  * ReadSource - чтение эксель-датафрейма
  * calcCross - нахождение временного интервала между двумя вершинами
  * calcRowOverlap - преображение двух временных интервалов в часы
  * removeSameElemtPairs - удаление дубликатов
  * getAprovePairs - получение пар элементов из списка
  * CalcFitness - преобразование списка вершин в список элементов для датафрейма
  * FormatResult - с использованием CalcFitness преобразование в результирующий датафрейм
  * do_process - функция для параллельных вычислений
* Поиск лучших групп(клик) - [search.py](https://github.com/plaguedoctor39/graph-search/blob/main/func/search.py)
  * findCliquesSizeK - нахождение клик размера k
  * process - функция для параллельных вычислений
  * runShipsAllocation - нахождение клик, их отбор и получение лучших
  * prepare_clique - преобразование списка клик в отсортированный по весу клики список
  * process_clique_nx - отбор лучших клик из полученного в prepare_clique списка.

## Graph approach benchmark
Бенчмарки зависят от мощностей машины, на которой будет запускаться код. В данном случае 10core CPU.

WEIGHT_THRESHOLD отсутствует

| n | Time     |
|----|----------|
| 10  |  761 ms    |
| 30  |  3.86 s    |
| 80  |  17min 11s    |
| 200 | недостаточно вычислительных мощностей     |

WEIGHT_THRESHOLD = -19

| n   | Time                                  |
|-----|---------------------------------------|
| 10  | 533 ms                                |
| 30  | 1.89 s                                |
| 80  |  31.3 s                                     |
| 200 | недостаточно вычислительных мощностей |

WEIGHT_THRESHOLD = -1

| n  | Time     |
|-----|----------|
| 10  |  563 ms    |
| 30  |  1.87 s    |
| 80  |  30.1 s    |
| 200 |  недостаточно вычислительных мощностей    |

WEIGHT_THRESHOLD = 3

| n  | Time   |
|-----|--------|
| 10  | 489 ms |
| 30  | 1.62 s |
| 80  | 16.2 s |
| 200 | недостаточно вычислительных мощностей       |
